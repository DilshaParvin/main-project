{% extends 'base3.html' %}
{% load static %}

{% block title %}{{ recipe.title }} - FlavorShare{% endblock %}

{% block content %}
<style>
  body {
    background: linear-gradient(to right, #ffecd2, #fcb69f);
  }
  .recipe-card {
    background: #fff;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.07);
    max-width: 900px;
    margin: auto;
  }
  .recipe-img {
    width: 100%;
    border-radius: 12px;
    max-height: 400px;
    object-fit: cover;
    margin-bottom: 20px;
  }
  .tag-badge {
    background-color: #ffe0b2;
    color: #333;
    margin-right: 8px;
    margin-bottom: 8px;
  }
</style>

<div class="recipe-card mt-4">
  {% if recipe.image %}
    <img src="{{ recipe.image.url }}" class="recipe-img" alt="{{ recipe.title }}">
  {% endif %}

  <h2 class="mb-2">{{ recipe.title }}</h2>
  <p class="text-muted">
    by 
    {% if recipe.author.user_type == 'restaurant' %}
      {{ recipe.author.restaurant_name }}
    {% else %}
      {{ recipe.author.get_full_name }}
    {% endif %}
    &middot; {{ recipe.updated_at|date:"M d, Y" }}
  </p>

  <div class="mb-3">
    {% for tag in recipe.tags.all %}
      <span class="badge tag-badge">{{ tag.name }}</span>
    {% endfor %}
  </div>

  <div class="mb-4">
    <h5>Description</h5>
    <p>{{ recipe.description }}</p>

    <h5>Ingredients</h5>
    <p>{{ recipe.ingredients|linebreaksbr }}</p>

    <h5>Instructions</h5>
    <p>{{ recipe.instructions|linebreaksbr }}</p>
  </div>

  <div class="row text-center mb-4">
    <div class="col">
      <i class="bi bi-clock"></i> <strong>Cook Time:</strong> {{ recipe.cook_time }} mins
    </div>
    <div class="col">
      <i class="bi bi-person-fill"></i> <strong>Servings:</strong> {{ recipe.servings }}
    </div>
    <div class="col">
      <i class="bi bi-bar-chart-fill"></i> <strong>Difficulty:</strong> {{ recipe.difficulty|capfirst }}
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center">
    <div>
      <i class="bi bi-heart-fill text-danger me-1"></i> {{ recipe.likes.count }}
      
    </div>
    {% if request.user == recipe.author %}
      <a href="{% url 'edit_recipe' recipe.pk %}" class="btn btn-sm btn-outline-primary">Edit</a>
    {% endif %}
  </div>
</div>
{% endblock %}
